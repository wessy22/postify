# מערכת בדיקת סטטוס פרסומים בקבוצות פייסבוק

## תיאור
מערכת זו מאפשרת לסרוק ולבדוק את סטטוס הפרסומים שנשלחו לקבוצות פייסבוק. המערכת מזהה את הקבוצות שפורסמו אליהן פוסטים היום, נכנסת לכל קבוצה ובודקת את הסטטוס הנוכחי של הפרסומים.

## קבצים במערכת

### קבצי הליבה:
- `scan-groups-post-status.js` - הסקריפט הראשי לסריקת הקבוצות
- `groups-post-status-viewer.html` - דף HTML לצפייה בתוצאות
- `scan-groups-status.bat` - הרצה פשוטה של הסקריפט
- `scan-groups-status-advanced.bat` - הרצה מתקדמת עם אפשרויות

### קבצי פלט:
- `latest-groups-post-status.json` - תוצאות אחרונות
- `groups-post-status-summary.json` - סיכום מצטבר
- `groups-post-status-[תאריך].json` - תוצאות לפי תאריך
- `groups-post-status-scan.log` - קובץ לוג מפורט

## איך להשתמש

### דרך 1: הרצה פשוטה
```bash
# הרצת הקובץ הפשוט
scan-groups-status.bat
```

### דרך 2: הרצה מתקדמת
```bash
# הרצת הקובץ המתקדם עם אפשרויות
scan-groups-status-advanced.bat
```

### דרך 3: הרצה ישירה
```bash
# סריקת קבוצות מהיום
node scan-groups-post-status.js

# סריקת קבוצות מתאריך ספציפי
node scan-groups-post-status.js --date=2024-12-08

# סריקת קבוצה ספציפית
node scan-groups-post-status.js --group="https://www.facebook.com/groups/example"
```

## איך זה עובד

### שלב 1: זיהוי קבוצות
המערכת מחפשת קבוצות בדרכים הבאות:
1. קריאת קבצי JSON של פוסטים מתיקיית המשתמש
2. בדיקת שדה `lastPublished` בכל פוסט
3. שליפת רשימת הקבוצות מהפוסטים שפורסמו

### שלב 2: סריקת קבוצות
לכל קבוצה המערכת:
1. בונה URL עם הסיומת `/my_posted_content`
2. נכנסת לעמוד באמצעות Puppeteer
3. מחפשת פוסטים מהתאריך הרלוונטי
4. מזהה את סטטוס כל פוסט

### שלב 3: זיהוי סטטוסים
המערכת מזהה את הסטטוסים הבאים:
- ✅ **פורסם בהצלחה** - הפוסט פורסם ומוצג בקבוצה
- ⏳ **בהמתנה לאישור** - הפוסט ממתין לאישור מנהלי הקבוצה
- ❌ **נדחה** - הפוסט נדחה על ידי מנהלי הקבוצה
- 🗑️ **הוסר** - הפוסט הוסר לאחר פרסום
- ❓ **לא ידוע** - לא ניתן לקבוע את הסטטוס

### שלב 4: שמירת תוצאות
המערכת שומרת את התוצאות:
1. בקבצי JSON מקומיים
2. בקובץ HTML לצפייה נוחה
3. שליחה לשרת (אם זמין)

## צפייה בתוצאות

### בדפדפן:
פתח את הקובץ `groups-post-status-viewer.html` בדפדפן לצפייה אינטראקטיבית

### בקבצי JSON:
- `latest-groups-post-status.json` - כל הנתונים המפורטים
- `groups-post-status-summary.json` - סיכום מהיר

## דוגמת פלט JSON

```json
{
  "scanDate": "2024-12-08T10:30:00.000Z",
  "totalGroups": 5,
  "successfulScans": 4,
  "failedScans": 1,
  "results": [
    {
      "groupName": "קבוצת דוגמה",
      "groupUrl": "https://www.facebook.com/groups/example",
      "statusUrl": "https://www.facebook.com/groups/example/my_posted_content",
      "posts": [
        {
          "status": "פורסם בהצלחה",
          "content": "זהו תוכן הפוסט...",
          "date": "2024-12-08",
          "index": 0
        }
      ],
      "scanTime": "2024-12-08T10:30:15.000Z",
      "success": true,
      "postFile": "post1.json",
      "postTitle": "כותרת הפוסט"
    }
  ]
}
```

## פתרון בעיות

### בעיות נפוצות:

#### 1. "לא נמצאו קבוצות שפורסמו היום"
**פתרון:**
- ודא שהקוד `run-day.js` רץ היום
- בדוק שקיימים קבצי פוסטים עם `lastPublished` מהיום
- נסה להריץ עם תאריך ספציפי

#### 2. שגיאות בחיבור לפייסבוק
**פתרון:**
- ודא שאתה מחובר לפייסבוק בדפדפן
- בדוק את קובץ `config.json`
- ודא שנתיב ה-Chrome נכון

#### 3. לא מוצאים פוסטים בקבוצות
**פתרון:**
- ייתכן שהפוסטים עדיין בעיבוד
- נסה לחכות 10-15 דקות ולהריץ שוב
- בדוק שהקישורים לקבוצות תקינים

### הגדרות מתקדמות:

#### שינוי זמן המתנה:
ערוך את השורות עם `setTimeout` בקוד

#### הוספת סוגי סטטוס נוספים:
ערוך את הפונקציה `checkPostStatusInGroup`

## אבטחה והגנת פרטיות

המערכת:
- משתמשת בפרופיל הפייסבוק הקיים שלך
- לא שומרת סיסמאות או נתוני התחברות
- שומרת רק נתוני סטטוס פרסומים
- ניתן למחוק את קבצי הפלט בכל עת

## תמיכה וייעוץ

לשאלות ותמיכה:
- בדוק את קובץ הלוג: `groups-post-status-scan.log`
- פנה לתמיכה הטכנית
- בדוק את התיעוד המלא באתר

---

**גרסה:** 1.0  
**תאריך עדכון אחרון:** דצמבר 2024
